{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/james/Projects/slydes/apps/marketing/src/app/api/contact/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { Resend } from 'resend'\n\n// Lazy init to avoid build-time errors when env var not set\nconst getResend = () => new Resend(process.env.RESEND_API_KEY)\n\n// Email to receive contact form submissions\nconst CONTACT_EMAIL = process.env.CONTACT_EMAIL || 'james@lostmonster.io'\n\nexport async function POST(request: NextRequest) {\n  try {\n    const data = await request.json()\n    const { name, email, subject, message } = data\n\n    // Validate required fields\n    if (!email) {\n      return NextResponse.json(\n        { error: 'Email is required' },\n        { status: 400 }\n      )\n    }\n\n    if (!message) {\n      return NextResponse.json(\n        { error: 'Message is required' },\n        { status: 400 }\n      )\n    }\n\n    // Validate email format\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n    if (!emailRegex.test(email)) {\n      return NextResponse.json(\n        { error: 'Invalid email format' },\n        { status: 400 }\n      )\n    }\n\n    // Format subject line\n    const subjectLabels: Record<string, string> = {\n      general: 'General Inquiry',\n      sales: 'Sales & Pricing',\n      support: 'Support',\n      partnership: 'Partnership',\n      press: 'Press & Media',\n      other: 'Other',\n    }\n    const subjectLine = subject \n      ? `[Slydes Contact] ${subjectLabels[subject] || subject}`\n      : '[Slydes Contact] New Message'\n\n    // Send email via Resend\n    const { error } = await getResend().emails.send({\n      from: 'Slydes Contact Form <contact@mail.slydes.io>',\n      to: CONTACT_EMAIL,\n      replyTo: email,\n      subject: subjectLine,\n      html: `\n        <div style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;\">\n          <div style=\"background: linear-gradient(135deg, #2563EB 0%, #1d4ed8 100%); padding: 30px; border-radius: 12px 12px 0 0;\">\n            <h1 style=\"color: white; margin: 0; font-size: 24px;\">New Contact Form Submission</h1>\n          </div>\n          \n          <div style=\"background: #f9fafb; padding: 30px; border: 1px solid #e5e7eb; border-top: none; border-radius: 0 0 12px 12px;\">\n            <div style=\"margin-bottom: 20px;\">\n              <p style=\"margin: 0 0 5px 0; font-size: 12px; color: #6b7280; text-transform: uppercase; letter-spacing: 0.5px;\">From</p>\n              <p style=\"margin: 0; font-size: 16px; color: #111827;\">${name || 'Not provided'}</p>\n            </div>\n            \n            <div style=\"margin-bottom: 20px;\">\n              <p style=\"margin: 0 0 5px 0; font-size: 12px; color: #6b7280; text-transform: uppercase; letter-spacing: 0.5px;\">Email</p>\n              <p style=\"margin: 0; font-size: 16px; color: #111827;\"><a href=\"mailto:${email}\" style=\"color: #2563EB; text-decoration: none;\">${email}</a></p>\n            </div>\n            \n            <div style=\"margin-bottom: 20px;\">\n              <p style=\"margin: 0 0 5px 0; font-size: 12px; color: #6b7280; text-transform: uppercase; letter-spacing: 0.5px;\">Subject</p>\n              <p style=\"margin: 0; font-size: 16px; color: #111827;\">${subjectLabels[subject] || subject || 'Not specified'}</p>\n            </div>\n            \n            <div style=\"margin-bottom: 0;\">\n              <p style=\"margin: 0 0 5px 0; font-size: 12px; color: #6b7280; text-transform: uppercase; letter-spacing: 0.5px;\">Message</p>\n              <div style=\"background: white; padding: 15px; border-radius: 8px; border: 1px solid #e5e7eb;\">\n                <p style=\"margin: 0; font-size: 16px; color: #111827; white-space: pre-wrap;\">${message}</p>\n              </div>\n            </div>\n          </div>\n          \n          <p style=\"text-align: center; color: #9ca3af; font-size: 12px; margin-top: 20px;\">\n            This message was sent from the Slydes contact form.\n          </p>\n        </div>\n      `,\n      text: `\nNew Contact Form Submission\n\nFrom: ${name || 'Not provided'}\nEmail: ${email}\nSubject: ${subjectLabels[subject] || subject || 'Not specified'}\n\nMessage:\n${message}\n\n---\nThis message was sent from the Slydes contact form.\n      `.trim(),\n    })\n\n    if (error) {\n      console.error('Resend error:', error)\n      return NextResponse.json(\n        { error: 'Failed to send message. Please try again.' },\n        { status: 500 }\n      )\n    }\n\n    console.log('Contact form submission:', { name, email, subject })\n\n    return NextResponse.json({\n      success: true,\n      message: 'Message sent successfully!',\n    })\n\n  } catch (error) {\n    console.error('Contact form error:', error)\n    return NextResponse.json(\n      { error: 'Internal server error' },\n      { status: 500 }\n    )\n  }\n}\n\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,4DAA4D;AAC5D,MAAM,YAAY,IAAM,IAAI,oRAAM,CAAC,QAAQ,GAAG,CAAC,cAAc;AAE7D,4CAA4C;AAC5C,MAAM,gBAAgB,QAAQ,GAAG,CAAC,aAAa,IAAI;AAE5C,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG;QAE1C,2BAA2B;QAC3B,IAAI,CAAC,OAAO;YACV,OAAO,kTAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAoB,GAC7B;gBAAE,QAAQ;YAAI;QAElB;QAEA,IAAI,CAAC,SAAS;YACZ,OAAO,kTAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAsB,GAC/B;gBAAE,QAAQ;YAAI;QAElB;QAEA,wBAAwB;QACxB,MAAM,aAAa;QACnB,IAAI,CAAC,WAAW,IAAI,CAAC,QAAQ;YAC3B,OAAO,kTAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAuB,GAChC;gBAAE,QAAQ;YAAI;QAElB;QAEA,sBAAsB;QACtB,MAAM,gBAAwC;YAC5C,SAAS;YACT,OAAO;YACP,SAAS;YACT,aAAa;YACb,OAAO;YACP,OAAO;QACT;QACA,MAAM,cAAc,UAChB,CAAC,iBAAiB,EAAE,aAAa,CAAC,QAAQ,IAAI,SAAS,GACvD;QAEJ,wBAAwB;QACxB,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,YAAY,MAAM,CAAC,IAAI,CAAC;YAC9C,MAAM;YACN,IAAI;YACJ,SAAS;YACT,SAAS;YACT,MAAM,CAAC;;;;;;;;;qEASwD,EAAE,QAAQ,eAAe;;;;;qFAKT,EAAE,MAAM,iDAAiD,EAAE,MAAM;;;;;qEAKjF,EAAE,aAAa,CAAC,QAAQ,IAAI,WAAW,gBAAgB;;;;;;8FAM9B,EAAE,QAAQ;;;;;;;;;MASlG,CAAC;YACD,MAAM,CAAC;;;MAGP,EAAE,QAAQ,eAAe;OACxB,EAAE,MAAM;SACN,EAAE,aAAa,CAAC,QAAQ,IAAI,WAAW,gBAAgB;;;AAGhE,EAAE,QAAQ;;;;MAIJ,CAAC,CAAC,IAAI;QACR;QAEA,IAAI,OAAO;YACT,QAAQ,KAAK,CAAC,iBAAiB;YAC/B,OAAO,kTAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA4C,GACrD;gBAAE,QAAQ;YAAI;QAElB;QAEA,QAAQ,GAAG,CAAC,4BAA4B;YAAE;YAAM;YAAO;QAAQ;QAE/D,OAAO,kTAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;QACX;IAEF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO,kTAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}